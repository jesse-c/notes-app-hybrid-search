up:
  docker compose up -d

down:
  docker compose down

health:
  vespa status deploy --wait 300

deploy:
  vespa deploy --wait 300 app

feed-single:
  vespa feed vespa-single.jsonl

feed-all:
  vespa feed vespa-all.jsonl

query-cli-single:
  vespa query -v 'yql=select * from entries where id=4012'

query-cli-all:
  vespa query -v 'yql=select * from entries where true'

# Embedding: art
query-cli-semantic:
  vespa query \
    'yql=select * from sources entries where {targetHits:10}(nearestNeighbor(body_embedding, query_embedding))' \
    'input.query(query_embedding)=[0.0323888324201107,0.05603674799203873,0.034462835639715195,-0.018237696960568428,-0.0569266714155674,0.025472475215792656,-0.04702112078666687,-0.09993055462837219,-0.017333192750811577,0.005766511429101229,-0.025852931663393974,0.05296244099736214,0.041506461799144745,-0.0047589801251888275,0.03001999296247959,-0.03649555891752243,0.030499659478664398,0.04911782220005989,-0.1110275611281395,-0.01309438981115818,0.017836974933743477,0.0333290733397007,0.038432762026786804,0.0170107614248991,-0.019399169832468033,-0.001976294908672571,0.005187754053622484,-0.015220662578940392,-0.021003874018788338,-0.2140403836965561,0.017568234354257584,0.03695766255259514,-0.019217539578676224,-0.03503090515732765,0.0170292966067791,-0.05436338484287262,-0.03486697003245354,0.0352889709174633,-0.005352238193154335,-0.06066321209073067,0.015593443997204304,0.03302778676152229,-0.020399972796440125,0.01829201728105545,0.047618135809898376,-0.02110183984041214,0.02909395843744278,-0.05013618618249893,0.028014883399009705,0.05203878879547119,-0.04831940308213234,-0.04723276197910309,-0.0017513774801045656,-0.023824278265237808,-0.03269130364060402,0.026815976947546005,0.0028576264157891273,-0.0298584196716547,0.01906469650566578,0.02687043882906437,0.008804338984191418,0.07855919748544693,-0.3335547149181366,0.03420453518629074,0.05414130166172981,0.031241830438375473,-0.00018414921942166984,-0.002660434925928712,-0.014489379711449146,-0.003646133467555046,0.0498022697865963,-0.008909553289413452,-0.03885114938020706,-0.0543256476521492,0.011019003577530384,-0.057894375175237656,-0.00624260026961565,0.031972259283065796,0.024687103927135468,-0.0503578819334507,0.00937261339277029,0.04777255281805992,0.02332235500216484,0.0191314946860075,-0.010718542151153088,0.046305347234010696,-0.028815029188990593,-0.05072440579533577,-0.01322272326797247,0.006751846056431532,-0.00024841356207616627,0.026261860504746437,0.018834218382835388,-0.024631936103105545,-0.044468607753515244,0.017465317621827126,-0.001423307810910046,0.03514033928513527,0.08212875574827194,0.32835081219673157,0.04756449535489082,-0.001633363077417016,0.05052672326564789,-0.028357598930597305,0.004332160111516714,-0.026105152443051338,-0.0012762369588017464,-0.03480815887451172,-0.006372382398694754,-0.01758459024131298,-0.020219821482896805,-0.029807021841406822,0.022210506722331047,5.655690256389789e-05,0.05141359567642212,0.04335040599107742,-0.018517179414629936,-0.012188388966023922,0.0425444021821022,-0.0026196660473942757,-0.04336334764957428,0.021182633936405182,-0.04184187948703766,0.0191202349960804,-0.007837247103452682,-0.021568600088357925,-0.0516161173582077,0.022555267438292503,-0.002078367630019784,0.01979614794254303,0.031452737748622894,-0.006787708029150963,-0.06280577927827835,-0.029561221599578857,0.00038927188143134117,0.003975377883762121,0.06790550798177719,-0.07600153237581253,-0.004662470426410437,-0.026330996304750443,-0.002745277713984251,-0.09737992286682129,0.07518110424280167,0.010296393185853958,0.07679092884063721,0.040140390396118164,0.004202586133033037,0.009519824758172035,-0.02256244793534279,-0.06410685181617737,-0.020113563165068626,0.010665236972272396,-0.0035301255993545055,0.040247514843940735,0.09106048941612244,-0.02255842834711075,-0.04473254829645157,0.0050751762464642525,-0.03439600020647049,0.030537113547325134,0.006228271406143904,0.015333198010921478,0.032055675983428955,0.05906050652265549,0.05486663430929184,-0.06898080557584763,0.057902030646800995,0.024876626208424568,0.04867052286863327,-0.004228606820106506,0.034689005464315414,0.003320476971566677,-0.00260624336078763,0.03980058431625366,0.014232190325856209,0.00588991679251194,-0.02358386106789112,0.03096328303217888,0.04189745709300041,-0.03512999415397644,-0.0307809766381979,0.06468598544597626,-0.02816372737288475,-0.06014573946595192,-0.017793333157896996,0.023755228146910667,-0.018434710800647736,0.018516987562179565,-0.009277451783418655,0.12121034413576126,-0.053286708891391754,0.1467999964952469,-0.10123924165964127,-0.0087022315710783,0.0071827732026577,0.019543109461665154,0.018568865954875946,0.03134850785136223,0.011244925670325756,0.015785256400704384,0.008156643249094486,-0.017375431954860687,0.0012167352251708508,0.025336893275380135,-0.00480246776714921,-0.07349248230457306,0.011825410649180412,0.017629582434892654,-0.034026406705379486,-0.023395761847496033,0.0037877685390412807,0.02759084478020668,0.03047114796936512,0.02593807876110077,0.07127892971038818,0.050375353544950485,0.028432531282305717,0.005594313144683838,0.060916468501091,0.04254474118351936,0.029218478128314018,0.023813525214791298,-0.06209263578057289,-0.07862796634435654,0.021374927833676338,0.002222568029537797,-0.04899623245000839,-0.03765489161014557,-0.045128896832466125,-0.0372796505689621,0.06670088320970535,0.01993202418088913,0.006644315551966429,0.05916152894496918,0.060997676104307175,0.02645842730998993,-0.01646116003394127,0.03491738811135292,0.025284096598625183,-0.06951142102479935,0.05765346437692642,0.03514279052615166,-0.04910384491086006,-0.020144861191511154,0.001412911107763648,-0.036675382405519485,-0.03238270431756973,-0.02955521084368229,-0.015247453935444355,0.16205359995365143,0.031033307313919067,-0.04334587976336479,0.06318046152591705,0.0358758419752121,-0.009373094886541367,0.022039566189050674,-0.1352403461933136,-0.014200753532350063,-0.05628587678074837,0.07270562648773193,0.011916992254555225,-0.035669952630996704,-0.01967277191579342,-0.004053723532706499,0.0007178379455581307,-0.026725146919488907,-0.03871235251426697,-0.006728250999003649,-0.02602599933743477,-0.015874167904257774,-0.0101595688611269,0.05137256160378456,0.0016533097950741649,0.028036393225193024,0.011694912798702717,-0.014372918754816055,0.038700170814991,-0.017193103209137917,-0.02874322235584259,-0.014437500387430191,0.0673687756061554,-0.028131898492574692,0.02578616701066494,0.004915084224194288,-0.038799259811639786,-0.03085574507713318,0.0071549080312252045,0.02916979230940342,-0.018016302958130836,0.005472262855619192,-0.053910303860902786,-0.08688247948884964,-0.009029749780893326,-0.008835036307573318,0.1668238490819931,0.002698395401239395,0.051543883979320526,0.04964463412761688,-0.023118820041418076,-0.003507426008582115,-0.036200474947690964,0.0167037732899189,-0.015352624468505383,-0.02440248616039753,-0.09066284447908401,-0.04321272671222687,0.02313106879591942,-0.04298131540417671,0.011206083931028843,0.019286789000034332,-0.04067419841885567,-0.03938573598861694,0.008157260715961456,0.04855750501155853,0.04340893775224686,-0.04353870451450348,0.009538018144667149,0.028937101364135742,-0.005786049645394087,-0.2579430639743805,-0.03268073499202728,0.04119529202580452,0.0380140095949173,-0.03880563750863075,-0.01875489205121994,0.02934199385344982,0.001327755395323038,-0.0033872597850859165,-0.05054372921586037,0.06916841119527817,0.029329847544431686,-0.010076138190925121,-0.03521466627717018,0.020322563126683235,0.05544579029083252,0.025449829176068306,0.03255869075655937,-0.0418691411614418,-0.09084354341030121,-0.027897991240024567,0.04138946160674095,0.13210268318653107,0.009871128015220165,0.05525762587785721,0.009289911948144436,0.016724394634366035,-0.0658315047621727,-0.11496514827013016,0.029706887900829315,0.014648905023932457,-0.014203974977135658,0.058105140924453735,-0.019399277865886688,-0.008553271181881428,0.06158741936087608,0.03579046204686165,-0.023396866396069527,0.01835121214389801,-0.05473362281918526,0.15463729202747345,-0.018727360293269157,0.004067295230925083,-0.0028766861651092768,0.01685590110719204,0.0029567182064056396,-0.00140660151373595,0.017483791336417198,-0.06414549052715302,0.017302580177783966,0.05903083086013794,-0.028430011123418808,-0.019162088632583618,0.0007762436871416867,-0.0011296089505776763,0.056709252297878265,0.01546481903642416,-0.01051445584744215,0.038877684623003006,0.019781922921538353,0.016286827623844147,-0.013443644158542156,-0.012757830321788788,-0.09840041399002075,-0.004467810969799757]' \
    'ranking.profile=embedding_similarity'

# Embedding: design
query-cli-bm25:
  vespa query \
    'yql=select * from sources entries where userQuery()' \
    'query=design' \
    'ranking.profile=bm25' \
    'hits=10'

# Example: photography
query-py-semantic:
  poetry run python main.py query semantic photography

# Example: design
query-py-bm25:
  poetry run python main.py query bm25 design

# Example: design
query-py-hybrid:
  poetry run python main.py query hybrid photography
